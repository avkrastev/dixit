<div class="room">
  <app-header></app-header>
  <div class="jumbotron jumbotron-fluid standings">
    <div class="container">
      <div class="d-flex justify-content-center">
        <div *ngFor="let player of players;">
          <div class="blob {{ player.color }} float-left"></div>
          <span class="{{ player.uid == uid ? 'font-weight-bold' : ''}}">{{ player.name }} </span>
          <div class="points">({{ player.points }} p.) </div>
        </div>
      </div>
      <div *ngIf="loading" class="text-center loading">
        Waiting for the players to choose a card
      </div>
      <div *ngIf="loading === false && myPoints != ''" class="text-center summary">
        {{ myPoints }}
      </div>
    </div>
  </div>

  <!-- <div *ngIf="leaderBoardShown" class="leaderboard table-responsive">
    <table class="table table-striped">
      <tbody>
        <tr *ngFor="let number of leaderboard; let k = index">
          <td scope="row">
            <div class="text-center"><strong>{{ k }}</strong></div>
            <div class="players text-center">
              <div *ngFor="let player of players;">
                <div *ngIf="player.points == k" class="blob {{ player.color }}"></div>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div> -->
  <!-- <div class="container decks">
    <div class="row">
      <div class="col-sm-12">
        <div id="stack" class="cards-container">
          <section id="card1" class="card card1"></section>
          <section id="card2" class="card card2"></section>
          <section id="card3" class="card card3"></section>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 text-center">
        <button
          type="button"
          class="btn btn-warning">
          Show cards
        </button>
      </div>
    </div>
  </div> -->

  <div class="container">
    <div class="card-deck-wrapper">
      <div class="card-deck">
        <div
          class="card"
          *ngFor="let card of cards | keyvalue;">
          <div class="scene">
            <div class="deck">
              <div class="card-face front">
                <div class="card-title"></div>
              </div>
              <div class="card-face back">
                <img class="card-img-top" src="/assets/images/cards/{{ card.value.card }}.png" alt="Dixit card">
              </div>
            </div>
          </div>
          <div *ngIf="storyTeller.uid == uid" class="card-body text-center">
            <div *ngIf="card.key == storyTeller.uid">
              My card
            </div>
            <div *ngIf="card.key != storyTeller.uid">
              This is the card choosen by {{ getPlayerByUID(card.key) }}
            </div>

            <div class="dots" *ngIf="card.value.choosenBy != undefined">
              <div
                *ngFor="let vote of card.value.choosenBy | keyvalue"
                class="blob {{ vote.value.color }} ready float-left">
              </div>
            </div>
          </div>

          <div *ngIf="storyTeller.uid !== uid" class="card-body text-center">
            <div *ngIf="loading === false">
              <div *ngIf="card.key == storyTeller.uid">
                <strong>This is the card explained by {{ storyTeller.name }}</strong>
              </div>
              <div *ngIf="card.key != storyTeller.uid">
                This is the card choosen by {{ getPlayerByUID(card.key) }}
              </div>

              <div class="dots" *ngIf="card.value.choosenBy != undefined">
                <div
                  *ngFor="let vote of card.value.choosenBy | keyvalue"
                  class="blob {{ vote.value.color }} ready float-left">
                </div>
              </div>
            </div>

            <button
              *ngIf="myVote == ''"
              type="button"
              class="btn btn-warning"
              (click)="finalCard(card)">
              This is the card
            </button>
          </div>

        </div>
      </div>

      <div *ngIf="loading === false && host" class="container text-center">
        <button type="button" class="btn btn-warning" (click)="nextRound()">
          Next round
        </button>
      </div>

    </div>
  </div>

</div>



